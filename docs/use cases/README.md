# Модель прецедентів

## Загальна діаграма прецедентів

**На рис. 1 зображена загальна діаграма прецедентів та їх основні можливості.**

<div style="text-align: center; margin: auto;">

@startuml

actor "Гість" as Guest
actor "Користувач" as User #lightblue
actor "Технічний експерт" as Expert #lightyellow

usecase "<b>UserRegister</b>\nЗареєструвати обліковий запис" as UC_1
usecase "<b>UserLogin</b>\nУвійти в обліковий запис" as UC_2

usecase "<b>Media content system</b>\nСистема медіа-контенту" as UC_3

usecase "<b>User management</b>\nКерування користувачами" as UC_4

Guest -u-> UC_1
Guest -u-> UC_2

User -u-|> Guest
User -d-> UC_3

Expert -u-|> Guest
Expert -d-> UC_4

@enduml

**Рис. 1** Загальна діаграма прецедентів

</div>

Згідно з діаграмою система має **3** типи користувачів: 
* **Гість** - неавторизований користувач. Має можливість створити обліковий запис або увійти в той, що існує. 
* **Користувач** - авторизований користувач. Має можливість взаємодіяти з системою медіа-контенту. 
* **Технічний експерт** - авторизований користувач з додатковими правами. Має можливість керувати іншими користувачами.

## Діаграма використання для Гостя

**На рис. 2 зображені усі можливості гостя.**

<div style="text-align: center; margin: auto;">

@startuml

actor "Гість" as Guest

usecase "<b>UserRegister</b>\nЗареєструвати обліковий запис" as UC_1
usecase "<b>UserLogin</b>\nУвійти в обліковий запис" as UC_2

Guest -d-> UC_1
Guest -d-> UC_2

@enduml

**Рис. 2** Діаграма можливостей гостя  

</div>

## Діаграма використання для Користувача

**На рис. 3 зображені усі можливості користувача.**

<div style="text-align: center; margin: auto;">

@startuml

actor "Користувач" as User #lightblue

usecase "<b>Media content system</b>\nСистема медіа-контенту" as UC_1

usecase "<b>ContentCreate</b>\nСтворення медіа-контенту" as UC_1_1 #lightblue
usecase "<b>ContentSearch</b>\nПошук медіа-контенту" as UC_1_2 #lightblue
usecase "<b>ContentUpdate</b>\nРедагування інформації про медіа-контент" as UC_1_3 #lightblue
usecase "<b>ContentDelete</b>\nВидалення медіа-контенту" as UC_1_4 #lightblue

User -d-> UC_1

UC_1_1 .r.> UC_1: extends
UC_1_2 .u.> UC_1: extends
UC_1_3 .u.> UC_1: extends
UC_1_4 .l.> UC_1: extends

@enduml

**Рис. 3** Діаграма можливостей користувача

</div>

## Діаграма використання для Технічного експерта

**На рис. 4 зображені усі можливості технічного експерта.**

<div style="text-align: center; margin: auto;">

@startuml

actor "Технічний експерт" as TechnicalExpert #lightyellow

usecase "<b>User management</b>\nКерування користувачами" as UserManagement 

usecase "<b>DeleteUser</b>\nВидалення користувача" as DeleteUser #lightblue
usecase "<b>UserRolePromote</b>\nПідвищення ролі користувача" as UserRolePromote #lightblue

TechnicalExpert --> UserManagement

DeleteUser .u.> UserManagement : "extends"
UserRolePromote .u.> UserManagement : "extends"    

@enduml

**Рис. 4** Діаграма можливостей технічного експерта

</div>


## Сценарії використання для незареєстрованого користувача

### Реєстрація користувача (UserRegister)

<b>ID:</b> UserRegister

<b>НАЗВА:</b> Реєстрація користувача

<b>УЧАСНИКИ:</b> Користувач, Система

<b>ПЕРЕДУМОВИ</b> Користувач не зареєстрований у системі

<b>РЕЗУЛЬТАТ:</b> Успішна реєстрація нового облікового запису

#### ВИКЛЮЧНІ СИТУАЦІЇ
- Користувач вводить некоректні дані -`InvalidDataException`
- Користувач не надав необхідні реєстраційні дані –`DataMissingException`
- Користувач вже зареєстрований в системі –`AlreadyRegisteredException`


#### ОСНОВНИЙ СЦЕНАРІЙ

1. Користувач відкриває сторінку реєстрації.
2. Користувач надає особисту інформацію (ім'я, прізвище, електронну пошту, пароль).
3. Система отримує запит на реєстрацію.
4. Система перевіряє надані реєстраційні дані.
5. Система перевіряє наявність облікового запису.
6. Система створює обліковий запис.
7. Система дає сигнал користувачу про успішну реєстрацію.

<div style="text-align: center; margin: auto;">
  
@startuml

|Користувач| 
start
: Користувач відкриває сторінку реєстрації;
: Користувач надає особисту інформацію (ім'я, прізвище, електронну пошту, пароль);
note left #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач вводить некоректні дані</b>
    <b>(InvalidDataException)</b>
end note

|Система|
: Система отримує запит на реєстрацію;
: Система перевіряє надані реєстраційні дані;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не надав необхідні реєстраційні дані</b>
    <b>(DataMissingException)</b>
end note
: Система перевіряє наявність облікового запису;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач вже зареєстрований в системі</b>
    <b>(AlreadyRegisteredException)</b>
end note
: Система створює обліковий запис;
: Система дає сигнал користувачу про успішну реєстрацію;

|Користувач| 
stop

@enduml

</div>

### Авторизація користувача (UserLogin)

<b>ID:</b> UserLogin

<b>НАЗВА:</b> Авторизація користувача

<b>УЧАСНИКИ:</b> Користувач, Система

<b>ПЕРЕДУМОВИ</b> Користувач має обліковий запис у системі

<b>РЕЗУЛЬТАТ:</b> Успішний вхід у систему

#### ВИКЛЮЧНІ СИТУАЦІЇ
- Користувач перевищив кількість спроб входу –`TooManyActionsException`
- Користувач надав некоректні дані –`DataNotFoundException`
- Користувач не зареєстрований –`NotRegisteredException`


#### ОСНОВНИЙ СЦЕНАРІЙ

1. Користувач відкриває сторінку входу.
2. Користувач надає облікові дані для входу (електронна пошта та пароль).
3. Система отримує запит на авторизацію.
4. Система перевіряє правильність введених авторизаційних даних.
5. Система перевіряє наявність облікового запису користувача.
6. Система надає дозвіл користувачу отримати доступ до свого облікового запису.
7. Система дає сигнал користувачу про успішну авторизацію.
  
<div style="text-align: center; margin: auto;">

@startuml
  
|Користувач| 
start
: Користувач відкриває сторінку входу;
: Користувач надає облікові дані для входу (електронна пошта та пароль);
note left #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач перевищив кількість спроб входу</b>
    <b>(TooManyActionsException)</b>
end note

|Система|
: Система отримує запит на авторизацію;
: Система перевіряє правильність наданих авторизаційних даних;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач надав некоректні дані</b>
    <b>(DataNotFoundException)</b>
end note
: Система перевіряє наявність облікового запису користувача;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не зареєстрований</b>
    <b>(NotRegisteredException)</b>
end note
: Система надає дозвіл користувачу отримати доступ до свого облікового запису;
: Система дає сигнал користувачу про успішну авторизацію;

|Користувач| 
stop

@enduml

</div>
  
## Сценарії використання для технічного експерта

### Підвищення ролі користувача (UserRolePromote)

<b>ID:</b> UserRolePromote

<b>НАЗВА:</b> Підвищення ролі користувача

<b>УЧАСНИКИ:</b> Технічний експерт, Користувач, Система

<b>ПЕРЕДУМОВИ:</b>
- Технічний експерт має право на зміну ролей користувачів
- Користувач має активний обліковий запис

<b>РЕЗУЛЬТАТ:</b> Роль користувача підвищено

#### ВИКЛЮЧНІ СИТУАЦІЇ:
- Користувач не є технічним експертом – `RoleNotEnoughRightsException`
- Користувач не зареєстрований – `NotRegisteredException`
- Користувач вже має найвищу доступну роль – `RoleAlreadyHighestException`

#### ОСНОВНИЙ СЦЕНАРІЙ

1. Технічний експерт обирає користувача для підвищення ролі.
2. Технічний експерт обирає роль для користувача. 
3. Система отримує запит на зміну ролі користувача.
4. Система перевіряє права технічного експерта.
5. Система перевіряє наявність облікового запису користувача.
6. Система змінює роль користувача на вказану.
7. Система дає сигнал технічному експерту та користувачу про успішне підвищення ролі.

<div style="text-align: center; margin: auto;">

@startuml

|Технічний експерт| 
start
: Технічний експерт обирає користувача для підвищення ролі;
: Технічний експерт обирає роль для користувача;

|Система|
: Система отримує запит на зміну ролі користувача;
: Система перевіряє права технічного експерта;
note right #ffaaaa 
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не є технічним експертом</b>
    <b>(RoleNotEnoughRightsException)</b>
end note
: Система перевіряє наявність облікового запису користувача;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не зареєстрований</b>
    <b>(NotRegisteredException)</b>
end note
: Система перевіряє, чи не має користувач найвищу доступну роль;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач вже має найвищу доступну роль</b>
    <b>(RoleAlreadyHighestException)</b>
end note
: Система змінює роль користувача на вказану;
: Система дає сигнал технічному експерту та користувачу про успішне підвищення ролі;

|Технічний експерт|
stop

@enduml

</div>

### Видалення користувача (UserDelete)

<b>ID:</b> UserDelete

<b>НАЗВА:</b> Видалення користувача

<b>УЧАСНИКИ:</b> Технічний експерт, Користувач, Система

<b>ПЕРЕДУМОВИ:</b> Користувач має активний обліковий запис та права на видалення

<b>РЕЗУЛЬТАТ:</b> Обліковий запис користувача видалено з системи

#### ВИКЛЮЧНІ СИТУАЦІЇ:
- Користувач не має прав на видалення – `PermissionDeniedException`
- Користувач не зареєстрований – `NotRegisteredException`

#### ОСНОВНИЙ СЦЕНАРІЙ

1. Технічний експерт обирає користувача для видалення.
2. Система отримує запит на видалення користувача.
3. Система перевіряє права на видалення.
4. Система перевіряє наявність облікового запису.
5. Система видаляє обліковий запис та забороняє доступ.
6. Система дає сигнал технічному експерту та користувачу про успішне видалення.

<div style="text-align: center; margin: auto;">

@startuml

|Технічний експерт| 
start
: Технічний експерт обирає користувача для видалення;

|Система|
: Система отримує запит на видалення користувача;
: Система перевіряє права на видалення;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не має прав на видалення</b>
    <b>(PermissionDeniedException)</b>
end note
: Система перевіряє наявність облікового запису;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не зареєстрований</b>
    <b>(NotRegisteredException)</b>
end note
: Система видаляє обліковий запис та забороняє доступ;
: Система дає сигнал технічному експерту та користувачу про успішне видалення;

|Технічний експерт|
stop

@enduml

</div>

## Сценарії використання для зареєстрованого користувача

### Створення медіа-контенту (ContentCreate)

<b>ID:</b> ContentCreate

<b>НАЗВА:</b> Створення медіа-контенту

<b>УЧАСНИКИ:</b> Користувач, Система

<b>ПЕРЕДУМОВИ</b> Користувач авторизований у системі та має права на створення контенту

<b>РЕЗУЛЬТАТ:</b> Створення нового контенту та збереження його у системі

#### ВИКЛЮЧНІ СИТУАЦІЇ
- Користувач не має прав на створення медіа-контенту - `PermissionDeniedException`
- Медіа-контент з таким ідентифікатором уже існує - `ContentIdExistsException`
- Медіа-контент не проходить валідацію - `InvalidContentDataException`

#### ОСНОВНИЙ СЦЕНАРІЙ

1. Користувач обирає опцію створення медіа-контенту.
2. Система надає користувачу інтерфейс для створення контенту.
3. Користувач заповнює надані поля.
4. Система перевіряє наявність відповідних прав у користувача.
5. Система перевіряє наявність контенту.
6. Система валідує отримані дані.
7. Система зберігає наданий контент.
8. Система дає сигнал користувачу про успішне створення.

<div style="text-align: center; margin: auto;">

@startuml

|Користувач| 
start
: Користувач обирає опцію створення медіа-контенту;

|Система|
: Система надає користувачу інтерфейс для створення контенту;

|Користувач| 
: Користувач заповнює надані поля;

|Система|
: Система перевіряє наявність відповідних прав у користувача;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не має прав на</b>
    <b>створення медіа-контенту</b>
    <b>(PermissionDeniedException)</b>
end note
: Система перевіряє наявність контенту;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Медіа-контент з таким</b>
    <b>ідентифікатором уже існує</b>
    <b>(ContentIdExistsException)</b>
end note
: Система валідує отримані дані;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Медіа-контент не проходить валідацію</b> 
    <b>(InvalidContentDataException)</b>
end note
: Система зберігає наданий контент;
: Система дає сигнал користувачу про успішне створення;

|Користувач|
stop

@enduml

</div>

### Пошук медіа-контенту (ContentSearch)

<b>ID:</b> ContentSearch

<b>НАЗВА:</b> Пошук медіа-контенту

<b>УЧАСНИКИ:</b> Користувач, Система

<b>ПЕРЕДУМОВИ:</b> Користувач авторизований у системі

<b>РЕЗУЛЬТАТ:</b> Видача користувачу результатів повного аналізу, відфільтрованого за параметрами, медіа-контенту

#### ВИКЛЮЧНІ СИТУАЦІЇ:	
- Медіа-контенту з таким ідентифікатором не існує - `InvalidContentIdException`
- Введені невалідні параметри пошуку - `InvalidSearchRequestException`

#### ОСНОВНИЙ СЦЕНАРІЙ:
1. Користувач обирає опцію пошуку медіа-контенту.
2. Система надає користувачу інтерфейс для пошуку контенту.
3. Користувач заповнює надані поля та обирає фільтри.
4. Система перевіряє наявність контенту.
5. Система валідує отриманий запит.
6. Система збирає інформацію за наданими даними.
7. Система аналізує та оброблює зібраний контент.
8. Система виводить користувачу готовий результат.

<div style="text-align: center; margin: auto;">

@startuml

|Користувач| 
start
: Користувач обирає опцію пошуку медіа-контенту;

|Система|
: Система надає користувачу інтерфейс для пошуку контенту;

|Користувач| 
: Користувач заповнює надані поля та обирає фільтри;

|Система|
: Система перевіряє наявність контенту;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Медіа-контенту з таким</b>
    <b>ідентифікатором не існує</b>
    <b>(InvalidContentIdException)</b>
end note
: Система валідує отриманий запит;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Введені невалідні параметри пошуку</b>
    <b>(InvalidSearchRequestException)</b>
end note
: Система збирає інформацію за наданими даними;
: Система аналізує та оброблює зібраний контент;
: Система виводить користувачу готовий результат;

|Користувач|
stop

@enduml

</div>

### Редагування інформації про медіа-контент (ContentUpdate)

<b>ID:</b> ContentUpdate

<b>НАЗВА:</b> Редагування інформації про медіа-контент

<b>УЧАСНИКИ:</b> Користувач, Система

<b>ПЕРЕДУМОВИ:</b> Користувач авторизований у системі та має права на редагування контенту

<b>РЕЗУЛЬТАТ:</b> Оновлення інформації про наявний у системі контент

#### ВИКЛЮЧНІ СИТУАЦІЇ:	
- Медіа-контенту з таким ідентифікатором не існує - `InvalidContentIdException`
- Користувач не має прав на редагування медіа-контенту - `PermissionDeniedException`
- Дані до оновлення не проходять валідацію - `InvalidContentDataException`

#### ОСНОВНИЙ СЦЕНАРІЙ:
1. Користувач обирає опцію редагування медіа-контенту.
2. Користувач обирає контент до редагування.
3. Користувач редагує інформацію про контент.
4. Система перевіряє наявність контенту.
5. Система перевіряє наявність відповідних прав у користувача.
6. Система валідує отриманий запит.
7. Система оновлює інформацію про контент.
8. Система дає сигнал користувачу про успішне оновлення.

<div style="text-align: center; margin: auto;">

@startuml

|Користувач| 
start
: Користувач обирає опцію редагування медіа-контенту;
: Користувач обирає контент до редагування;
: Користувач редагує інформацію про контент;

|Система|
: Система перевіряє наявність контенту;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Медіа-контенту з таким</b>
    <b>ідентифікатором не існує</b>
    <b>(InvalidContentIdException)</b>
end note
: Система перевіряє наявність відповідних прав у користувача;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не має прав на</b>
    <b>редагування медіа-контенту</b>
    <b>(PermissionDeniedException)</b>
end note
: Система валідує отриманий запит;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Оновлені дані не проходить валідацію</b>
    <b>(InvalidContentDataException)</b>
end note
: Система оновлює інформацію про контент;
: Система дає сигнал користувачу про успішне оновлення;

|Користувач|
stop

@enduml

</div>

### Видалення медіа-контенту (ContentDelete)

<b>ID:</b> ContentDelete

<b>НАЗВА:</b> Видалення медіа-контенту

<b>УЧАСНИКИ:</b> Користувач, Система

<b>ПЕРЕДУМОВИ:</b> Користувач авторизований у системі та має права на видалення контенту

<b>РЕЗУЛЬТАТ:</b> Видалення наявного у системі контенту

#### ВИКЛЮЧНІ СИТУАЦІЇ:	
- Медіа-контенту з таким ідентифікатором не існує - `InvalidContentIdException`
- Користувач не має прав на видалення медіа-контенту - `PermissionDeniedException`

#### ОСНОВНИЙ СЦЕНАРІЙ:
1. Користувач обирає опцію видалення медіа-контенту.
2. Користувач обирає контент до видалення.
3. Система перевіряє наявність контенту.
4. Система перевіряє наявність відповідних прав у користувача.
5. Система видаляє контент.
6. Система дає сигнал користувачу про успішне видалення.

<div style="text-align: center; margin: auto;">

@startuml

|Користувач| 
start
: Користувач обирає опцію видалення медіа-контенту;
: Користувач обирає контент до видалення;

|Система|
: Система перевіряє наявність контенту;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Медіа-контенту з таким</b>
    <b>ідентифікатором не існує</b>
    <b>(InvalidContentIdException)</b>
end note
: Система перевіряє наявність відповідних прав у користувача;
note right #ffaaaa
    <b>Можлива виключна ситуація:</b>
    <b>Користувач не має прав на</b>
    <b>видалення медіа-контенту</b>
    <b>(PermissionDeniedException)</b>
end note
: Система видаляє контент;
: Система дає сигнал користувачу про успішне видалення;

|Користувач|
stop

@enduml

</div>